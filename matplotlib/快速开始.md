# 快速开始

本教程介绍了一些基本的使用模式和最佳实践 帮助您开始使用 Matplotlib。

~~~python
import matplotlib as mpl
import matplotlib.pyplot as plt
import numpy as np
~~~

## 一个简单的例子

Matplotlib 在Figures 上绘制您的数据（例如，Windows、Jupyter 小部件等），可以根据 x-y 坐标指定点的区域（或极坐标图中的 theta-r，3D 图中的 x-y-z 等）。最简单的方法创建带有轴的图形是使用pyplot.subplots。然后，我们可以使用Axes.plot在轴上绘制一些数据：

~~~python
fig, ax = plt.subplots()  # 创建一个包含单个轴的图窗。

ax.plot([1, 2, 3, 4], [1, 4, 2, 3]);  # 在轴上绘制一些数据。
~~~

！[1](img/第一个例子.png)

## 图的部分

这是 Matplotlib 图的组成部分。

![1](img/图的部分.png)

### 第一个成分：Figure（画布）

整个图。Figure跟踪所有子轴（child Axes）、一组“特殊”艺术成分（标题、图形图例、颜色条等），甚至嵌套子图形。

创建新图形的最简单方法是使用pyplot：

~~~python
fig = plt.figure()  # 没有轴的空图
fig, ax = plt.subplots()  # 具有单轴的图形
fig, axs = plt.subplots(2, 2)  # 具有 2x2 轴网格的图形
~~~

将轴与Figure一起创建通常很方便，但您也可以稍后手动添加轴。请注意，许多 Matplotlib 后端支持在图形窗口上进行缩放和平移。

### 第二个成分：Axes（坐标轴）

轴是附加到图形的渲染成分，该成分包含用于绘制数据的区域，通常包括两个（在3D的情况下为三个）刻度轴（Axis）对象（请注意Axes和Axis之间的差异），这些对象提供刻度和刻度标签，为轴中的数据提供刻度。每个轴还有一个标题（通过 set_title（）设置）、一个x标签（通过set_xlabel（）设置）和一个通过set_ylabel（）设置的 y 标签）。

Axes 类及其成员函数是使用 OOP 接口的主要入口点，并且在其上定义了大多数绘图方法（例如，如上所示的 ax.plot（） 使用绘图方法）

### 第三个成分：Axis（刻度轴）

这些对象设置刻度和限制，并生成刻度（轴上的标记）和刻度标签（标记刻度的字符串）。刻度的位置由定位器（Locator）对象确定，刻度标签字符串由格式化（Formatter）进程格式化。正确的定位器（Locator）和格式化（Formatter）进程的组合可以非常精细地控制刻度位置和标签。

### 第四个成分：Artist（渲染成份）

基本上，图形上可见的所有内容都是渲染成分（甚至是图形，轴和轴对象）。这包括文本Text对象、Line2D 对象、集合collections对象、补丁Patch对象等。渲染图形时，所有渲染成分都会被绘制到画布（canvas）上。大多数渲染成分都绑定在坐标轴（Axes）上;这样的渲染成分不能由多个坐标轴（Axes）共享，也不能从一个坐标轴移动到另一个坐标轴。

## 绘图函数的输入类型

绘图函数需要 numpy.array 或 numpy.ma.masked_array 作为输入，或者需要可以传递给 numpy.asarray 的对象。类似于数组（“类数组”）的类，如 pandas 数据对象和 numpy.matrix，可能无法按预期工作。常见的约定是在绘制之前将它们转换为 numpy.array 对象。例如，要转换 numpy.matrix

~~~python
b = np.matrix([[1, 2], [3, 4]])
b_asarray = np.asarray(b)
~~~

大多数方法还将解析可寻址的对象，如字典（dict）、numpy.recarray 或 pandas.DataFrame。Matplotlib 允许您提供data关键字参数并生成传递对应于 x 和 y 变量的字符串的图。

~~~python
np.random.seed(19680801)  # 为随机数生成器设定种子。
data = {'a': np.arange(50),
        'c': np.random.randint(0, 50, 50),
        'd': np.random.randn(50)}
data['b'] = data['a'] + 10 * np.random.randn(50)
data['d'] = np.abs(data['d']) * 100

fig, ax = plt.subplots(figsize=(5, 2.7), layout='constrained')
ax.scatter('a', 'b', c='c', s='d', data=data) # 散点图
ax.set_xlabel('entry a')
ax.set_ylabel('entry b');
~~~

## 代码风格

显式接口和隐式接口 如上所述，使用 Matplotlib 基本上有两种方法：

- 显式创建图形和轴，并对其调用方法（“面向对象（OO）风格”）。
- 依靠 pyplot 隐式创建和管理图形和轴，并使用 pyplot 函数进行绘图。

请参阅 Matplotlib 应用进程接口 （API），了解隐式接口和显式接口之间的权衡说明。

所以你可以使用面向对象风格

~~~python
x = np.linspace(0, 2, 100)  # 示例数据。

# 请注意，即使在面向对象样式中，我们也使用 '.pyplot.figure' 来创建 Figure。
fig, ax = plt.subplots(figsize=(5, 2.7), layout='constrained')
ax.plot(x, x, label='linear')  # 在轴上绘制一些数据。
ax.plot(x, x**2, label='quadratic')  # 在轴上绘制更多数据...
ax.plot(x, x**3, label='cubic')  # ... 还有更多.
ax.set_xlabel('x label')  # 向坐标轴添加 x 标签。
ax.set_ylabel('y label')  # 向坐标轴添加 y 标签。
ax.set_title("Simple Plot")  # 向坐标轴添加标题。
ax.legend()  # 添加图例(legend)
~~~

![1](img/面向对象风格.png)

也可以使用pyplot风格

~~~python
x = np.linspace(0, 2, 100)  # 样例数据

plt.figure(figsize=(5, 2.7), layout='constrained')
plt.plot(x, x, label='linear')  # 在（隐式）坐标轴上绘制一些数据。
plt.plot(x, x**2, label='quadratic')  # 例如
plt.plot(x, x**3, label='cubic')
plt.xlabel('x label')
plt.ylabel('y label')
plt.title("Simple Plot")
plt.legend()
~~~

![1](img/pyplot风格.png)

（此外，还有第三种方法，用于在GUI应用进程中嵌入Matplotlib的情况，它完全删除pyplot，即使对于图形创建也是如此。有关详细信息，请参阅库中的相应部分：在图形用户界面中嵌入 Matplotlib。

Matplotlib的文档和示例同时使用OO和pyplot样式。通常，我们建议使用 OO 样式，特别是对于复杂的绘图，以及旨在作为较大项目的一部分重用的函数和脚本。但是，pyplot 样式对于快速交互式工作非常方便。

> 注意：
> 您可能会找到使用 pylab 接口的旧示例——from pylab import *。此方法已强烈弃用。

